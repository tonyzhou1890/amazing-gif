!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t="undefined"!=typeof globalThis?globalThis:t||self).AMZGif=i()}(this,function(){"use strict";function a(t,s,h,o){return new(h=h||Promise)(function(e,i){function a(t){try{r(o.next(t))}catch(t){i(t)}}function n(t){try{r(o.throw(t))}catch(t){i(t)}}function r(t){var i;t.done?e(t.value):((i=t.value)instanceof h?i:new h(function(t){t(i)})).then(a,n)}r((o=o.apply(t,s||[])).next())})}function o(t){return"function"==typeof t}const l={notReady:"数据未就绪",wrongParam:"参数错误",noGifUrl:"未指定 gif 图片地址",gifEmpty:"gif 不存在",gifDataTypeError:"gif 数据类型错误",notGif:"文件非 gif",noConfigEl:"未指定 img 元素",noImg:"未找到 img 元素",notImg:t=>`元素 ${t} 不是图片`,isRendering:"isRendering",skinError:"皮肤出错",skinContainerIsSmall:"空间不足以显示皮肤"};function y(t,i,e){return t>>i&(1<<e)-1}const d={decode:(t,i)=>{function e(){return new Array(2**t+2).fill(0).map((t,i)=>String.fromCharCode(i))}let a=e();var n=2**t,r=2**t+1;let s=t+1,h="",o=!0;var l=i.length;let d=0,g=0,c=s,f=0,u="",p=0;for(;d<l;){for(c=s,f=0;0!==c;)8-g>=c?(f+=y(i[d],g,c)<<s-c,g+=c,c=0):(f+=y(i[d],g,8-g)<<s-c,c-=8-g,g=8),8===g&&(d++,g=0);if(f===r)break;f===n?(a=e(),s=t+1,o=!0):(void 0!==a[f]?o?(h+=a[f],p=f,o=!1):(h+=a[f],u=a[f][0],a.push(a[p]+u),p=f):(u=a[p][0],h+=a[p]+u,a.push(a[p]+u),p=f),a.length>=2**s&&s<12&&s++)}let m=new Uint8Array(h.length);for(let t=0;t<h.length;t++)m[t]=h.charCodeAt(t);return m}};function e(t,i){if(!(t instanceof ArrayBuffer)){if(o(i))return i(l.gifDataTypeError,"onDataError");throw new Error(l.gifDataTypeError)}var e=new Uint8Array(t);const a={ptr:0},n={header:{type:"",isGif:!1,version:"",width:0,height:0,gctFlag:!1,cr:0,sortFlag:!1,gctSize:0,gctStartByte:0,gctEndByte:0,bgIndex:0,pixelAspect:0,gctList:[]},frames:[]};for(;a.ptr<e.length;){if(0===a.ptr){var r=function(i,t){const e={type:"",isGif:!1,version:""};for(let t=0;t<3;t++)e.type+=String.fromCharCode(i[t]);if(e.isGif=e.type==="GIF",e.isGif){for(let t=3;t<6;t++)e.version+=String.fromCharCode(i[t]);t.ptr=5}return e}(e,a);if(!r.isGif)return i(l.notGif,"onDataError");Object.assign(n.header,r)}else if(6===a.ptr){var r=function(t,i){const e={width:0,height:0,gctFlag:!1,cr:0,sortFlag:!1,gctSize:0,gctStartByte:0,gctEndByte:0,bgIndex:0,pixelAspect:0};e.width=t[6]+(t[7]<<8),e.height=t[8]+(t[9]<<8),e.gctFlag=Boolean(t[10]>>7),e.cr=112&t[10],e.sortFlag=Boolean(8&t[10]),e.gctSize=Math.pow(2,1+(7&t[10])),e.gctFlag&&(e.gctStartByte=13,e.gctEndByte=13+3*e.gctSize-1);return e.bgIndex=t[11],e.pixelAspect=t[12],i.ptr=12,e}(e,a),s=(Object.assign(n.header,r),r.gctFlag?(++a.ptr,function(i,t,e){const a=3*t,n=13+a,r=[];for(let t=13;t<n;t+=3)r.push([i[t],i[t+1],i[t+2]]);return e.ptr=n-1,r}(e,r.gctSize,a)):[]);n.header.gctList=s}else if(a.ptr+1<e.length&&33===e[a.ptr]&&255===e[a.ptr+1]&&!n.appExt){s=function(i,t){const e={appName:"",repetitionTimes:0,startByte:0,endByte:0};e.startByte=t.ptr;let a=e.startByte;var n=i[a+=2];a++;for(let t=0;t<n-3;t++)e.appName+=String.fromCharCode(i[a+t]);a+=n;var r=i[a];return e.endByte=a+r,e.repetitionTimes=i[a+=2],t.ptr=e.endByte,e}(e,a);n.appExt=s}else if(a.ptr+1<e.length&&33===e[a.ptr]&&249===e[a.ptr+1])n.frames.push(g(e,a));else if(44===e[a.ptr]){let t=g(e,a);var h=n.frames[n.frames.length-1];h.endByte?n.frames.push(t):(t.startByte=h.startByte,t.disposalMethod=h.disposalMethod,t.userInputFlag=h.userInputFlag,t.transColorFlag=h.transColorFlag,t.delay=h.delay,t.transColorIdx=h.transColorIdx,n.frames[n.frames.length-1]=t)}else if(a.ptr+1<e.length&&33===e[a.ptr]&&1===e[a.ptr+1])n.frames.push(g(e,a));else if(59===e[a.ptr])break;a.ptr++}return console.log(n),n}function g(a,t){const n={startByte:t.ptr,endByte:0,width:0,height:0,left:0,top:0,disposalMethod:0,userInputFlag:!1,transColorFlag:!1,delay:0,transColorIdx:0,lctFlag:!1,interlace:!1,sortFlag:!1,lctSize:0,lctStartByte:0,lctEndByte:0,lctList:[],imageData:new Uint8Array,imageStartByte:0,imageEndByte:0};if(33===a[t.ptr]&&249===a[t.ptr+1]&&(t.ptr+=2,r=a[t.ptr],r=t.ptr+r+1,t.ptr++,n.disposalMethod=(28&a[t.ptr])>>2,n.userInputFlag=Boolean((2&a[t.ptr])>>1),n.transColorFlag=Boolean(1&a[t.ptr]),n.delay=10*(a[++t.ptr]+(a[++t.ptr]<<8)),n.transColorIdx=a[++t.ptr],(0!==a[++t.ptr]||t.ptr>r)&&(t.ptr=r)),44===a[t.ptr]){if(n.left=a[++t.ptr]+(a[++t.ptr]<<8),n.top=a[++t.ptr]+(a[++t.ptr]<<8),n.width=a[++t.ptr]+(a[++t.ptr]<<8),n.height=a[++t.ptr]+(a[++t.ptr]<<8),n.lctFlag=Boolean(128&a[++t.ptr]),n.interlace=Boolean(64&a[t.ptr]),n.sortFlag=Boolean(32&a[t.ptr]),n.lctSize=Math.pow(2,1+(7&a[t.ptr])),n.lctFlag){n.lctStartByte=t.ptr+1,n.lctEndByte=t.ptr+3*n.lctSize;for(let t=n.lctStartByte;t<n.lctEndByte;t+=3)n.lctList.push([a[t],a[t+1],a[t+2]]);t.ptr=n.lctEndByte}t.ptr++,n.imageStartByte=t.ptr;var r=a[t.ptr++];const o=[];let i=0;for(;0!==a[t.ptr]&&void 0!==a[t.ptr];){var s=a[t.ptr++],h=a.slice(t.ptr,t.ptr+s);i+=h.length,o.push(h),t.ptr+=s}n.imageEndByte=t.ptr,n.endByte=t.ptr;let e=new Uint8Array(i);for(let t=o.length-1;0<=t;t--)e.set(o[t],i-=o[t].length);n.imageData=d.decode(r,e)}return n}function i(e){var t=performance.now();let a=0,n=t;a=window.requestAnimationFrame(function t(i){1e3/60<=i-n&&(n=i-(i-n)%(1e3/60),e.map(t=>{t(i)})),a=window.requestAnimationFrame(t)})}function h(e,a,n){if(a.canvasImageData instanceof ImageData)return a.canvasImageData;var r=a.lctFlag?a.lctList:e.header.gctList,t=e.header.gctFlag?[...e.header.gctList[e.header.bgIndex],255]:null,s=e.header.width,e=e.header.height;if(!n){const u=new Uint8ClampedArray(s*e*4);var h=t||[0,0,0,255];for(let t=0,i=s*e;t<i;t+=4)u[t]=h[0],u[t+1]=h[1],u[t+2]=h[2],u[t+2]=h[3];n=new ImageData(u,s,e)}const o=new Uint8Array(a.imageData.length);if(a.interlace){let i=0,e=0;function l(){for(let t=0;t<a.width;t++)o[e]=a.imageData[i*a.width+t],e++}for(;i<a.height;)l(),i+=8;for(i=4;i<a.height;)l(),i+=8;for(i=2;i<a.height;)l(),i+=4;for(i=1;i<a.height;)l(),i+=2}else o.set(a.imageData);const d=new Uint8ClampedArray(s*e*4);for(let t=0,i=s*e;t<i;t++){var g=t%s,c=t/s>>0,f=4*t;!(g>=a.left&&g<a.left+a.width&&c>=a.top&&c<a.top+a.height)||(g=g-a.left+(c-a.top)*a.width,a.transColorFlag&&o[g]===a.transColorIdx)?(d[f]=n.data[f],d[1+f]=n.data[1+f],d[2+f]=n.data[2+f],d[3+f]=n.data[3+f]):(c=r[o[g]],d[f]=c[0],d[1+f]=c[1],d[2+f]=c[2],d[3+f]=255)}t=new ImageData(d,s,e);return a.canvasImageData=t}function n(t,i,e,a,n){var r=e.frames[a],a=function t(i,e){if(!(e<=0)){var a=i.frames[e-1];if(0!==a.disposalMethod&&2!==a.disposalMethod)return[1].includes(a.disposalMethod)?a.canvasImageData||h(i,a,t(i,e-1)):3===a.disposalMethod?t(i,e-1):void 0}}(e,a);let s=h(e,r,a);if(o(n)){let t=new ImageData(s.width,s.height);t.data.set(s.data),t=n(t),s=t}i.putImageData(s,0,0),t.drawImage(i.canvas,0,0,s.width,s.height,0,0,t.canvas.width,t.canvas.height),s}class r extends class{constructor(t){this.keys=[],this.watch={},this.amzGif=t,this.cache={},this.init()}init(){this.dirtyChecking()}dirtyChecking(){const i=[];let e;Object.keys(this.watch).map(t=>{e=this.getValue(t),this.cache[t]!==e&&i.push({key:t,oldValue:this.cache[t],newValue:e})}),i.map(t=>a(this,void 0,void 0,function*(){o(this.watch[t.key])&&(yield this.watch[t.key](t.newValue,t.oldValue))}))}getValue(t){var i=t.split(".").filter(t=>t);let e=this.amzGif;for(let t=0;t<i.length&&void 0!==(e=null===e||void 0===e?void 0:e[i[t]]);t++);return e}}{constructor(t){super(t),this.playDiv=null,this.playImg=null,this.loadingDiv=null,this.loadingImg=null,this.loadingImgRoate=0,this.handlePlay=this.handlePlay.bind(this),this.dirtyChecking=this.dirtyChecking.bind(this),this.init(),this.setWatch()}init(){const t=this.amzGif._canvas.parentElement;if(t){var i=t.getBoundingClientRect();const e=this.genMask(i.width,i.height),a=(e.style.zIndex="1",e.style.display="none",e.style.cursor="pointer",e.addEventListener("click",this.handlePlay.bind(this)),this.playDiv=e,document.createElement("img")),n=(a.src="data:image/svg+xml;base64,PHN2ZyB0PSIxNjYyNzg5NjY0NjUyIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIzNjciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNMTI4IDEzOC42NjY2NjdjMC00Ny4yMzIgMzMuMzIyNjY3LTY2LjY2NjY2NyA3NC4xNzYtNDMuNTYyNjY3bDY2My4xNDY2NjcgMzc0Ljk1NDY2N2M0MC45NiAyMy4xNjggNDAuODUzMzMzIDYwLjggMCA4My44ODI2NjZMMjAyLjE3NiA5MjguODk2QzE2MS4yMTYgOTUyLjA2NCAxMjggOTMyLjU2NTMzMyAxMjggODg1LjMzMzMzM3YtNzQ2LjY2NjY2NnoiIGZpbGw9IiMzRDNEM0QiIHAtaWQ9IjIzNjgiPjwvcGF0aD48L3N2Zz4=",a.style.width="60px",a.style.height="60px",a.style.opacity="0.6",this.playImg=a,e.appendChild(a),t.appendChild(e),this.genMask(i.width,i.height)),r=((this.loadingDiv=n).style.zIndex="2",n.style.display="none",document.createElement("img"));(this.loadingImg=r).src="data:image/svg+xml;base64,PHN2ZyB0PSIxNjYyNzg5NzI0Njc4IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjM0NDEiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNNTEyLjUxMSAyMS40ODNjLTI3MS4xNjMgMC00OTEuMDI4IDIxOS44Ni00OTEuMDI4IDQ5MS4wMjggMCAyNzEuMTczIDIxOS44NTYgNDkxLjAzIDQ5MS4wMjggNDkxLjAzIDI2LjU1NCAwIDQ4LjA4LTIxLjUyNyA0OC4wOC00OC4wOCAwLTI2LjU1NC0yMS41MjYtNDguMDgtNDguMDgtNDguMDgtMjE4LjA2NSAwLTM5NC44NjktMTc2LjgwNC0zOTQuODY5LTM5NC44NyAwLTIxOC4wNiAxNzYuODEzLTM5NC44NjkgMzk0Ljg3LTM5NC44NjkgMjE4LjA2NSAwIDM5NC44NjkgMTc2LjgwNCAzOTQuODY5IDM5NC44NyAwIDI2LjU1MyAyMS41MjYgNDguMDggNDguMDggNDguMDggMjYuNTUzIDAgNDguMDgtMjEuNTI3IDQ4LjA4LTQ4LjA4IDAtMjcxLjE3My0yMTkuODU3LTQ5MS4wMy00OTEuMDMtNDkxLjAzeiIgcC1pZD0iMzQ0MiI+PC9wYXRoPjwvc3ZnPg==",r.style.width="60px",r.style.height="60px",r.style.opacity="0.6",n.appendChild(r),t.appendChild(n),this.amzGif._rAFCallbackQueue.push(this.dirtyChecking.bind(this))}else this.amzGif._errCall(l.skinError,"onError")}genMask(t,i){const e=document.createElement("div");return e.style.backgroundColor="rgba(0, 0, 0, 0.3)",e.style.width=t+"px",e.style.height=i+"px",e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e}setWatch(){this.watch.isPlaying=t=>{this.playDiv&&(this.playDiv.style.display=t||this.amzGif.isLoading?"none":"flex")},this.watch.isLoading=t=>{this.loadingDiv&&(this.loadingDiv.style.display=t?"flex":"none",t&&this.loadingImg&&(this.loadingImg.style.transform=`rotate(${this.loadingImgRoate+=1}deg)`))}}handlePlay(){this.amzGif.isPlaying||this.amzGif.play()}}const s={loop:!0,auto:!1,interactive:!0,skin:"basic",speed:1},c=[.5,1,1.5,2];class t{constructor(t){this.speedList=c,this._imgEl=null,this._canvas=null,this._ctx=null,this._offscreenCanvas=null,this._offscreenCtx=null,this._gifBuffer=null,this.gifData=null,this._currFrame=-1,this._nextUpdateTime=performance.now(),this._rAFCallbackQueue=[],this.isLoading=!1,this.isPlaying=!1,this.isRendering=!1,this._config=Object.assign(Object.assign({},s),t),c.includes(this._config.speed)||(this._config.speed=1),this._update=this._update.bind(this),this._renderFrame=this._renderFrame.bind(this),this._togglePlay=this._togglePlay.bind(this),this._init()}_init(){if(this._config.el){if(this._config.el instanceof HTMLImageElement&&(this._imgEl=this._config.el),"string"==typeof this._config.el){var t=document.querySelector(this._config.el);if(!t)return void this._errCall(l.noImg+this._config.el,"onError");if(!(t instanceof HTMLImageElement))return void this._errCall(l.notImg(this._config.el),"onError");this._imgEl=t}null!=(t=this._imgEl)&&t.addEventListener("load",()=>{var t;this._initCanvas(),this._initContainer(),(t=this)._config.interactive&&"basic"===t._config.skin&&new r(t),!0===this._config.auto&&this.play(),this._rAFCallbackQueue.push(this._update),i(this._rAFCallbackQueue)})}else this._errCall(l.noConfigEl,"onError")}_initCanvas(){var t;const i=this._imgEl;var e=i.getBoundingClientRect();console.log(e),this._config.width="number"==typeof this._config.width?this._config.width:null!=(t=null==e?void 0:e.width)?t:0,this._config.height="number"==typeof this._config.height?this._config.height:null!=(t=null==e?void 0:e.height)?t:0,this._canvas=document.createElement("canvas"),this._canvas.style.cursor="pointer",this._canvas.addEventListener("click",this._togglePlay),this._canvas.width=this._config.width,this._canvas.height=this._config.height,this._canvas.style.width=this._config.width+"px",this._canvas.style.height=this._config.height+"px",this._ctx=this._canvas.getContext("2d"),this._ctx.globalCompositeOperation="copy",null!=(t=this._ctx)&&t.drawImage(i,0,0,null!=(t=null==e?void 0:e.width)?t:this._config.width,null!=(t=null==e?void 0:e.height)?t:this._config.height,0,0,null!=(t=this._config.width)?t:null==e?void 0:e.width,null!=(t=this._config.height)?t:null==e?void 0:e.height)}_initContainer(){var t,i=this._imgEl;const e=document.createElement("div");i.id&&(e.id=i.id),e.style.width=this._config.width+"px",e.style.height=this._config.height+"px",e.style.position="relative",e.style.display="inline-block",this._canvas&&(e.appendChild(this._canvas),null!=(t=i.parentElement)&&t.replaceChild(e,i))}play(){var i;return a(this,void 0,void 0,function*(){if(null===this._gifBuffer){if(!this._config.src)return this._errCall(l.noGifUrl,"onError");yield this._getGif().catch(t=>this._errCall(t.message,"onLoadError"))}if(null!==this._gifBuffer){if(null===this.gifData){var t=e(this._gifBuffer,this._errCall);if(!t||!t.header.isGif)return;this.gifData=t,this._offscreenCanvas=document.createElement("canvas"),this._offscreenCanvas.width=null==(i=this.gifData)?void 0:i.header.width,this._offscreenCanvas.height=null==(i=this.gifData)?void 0:i.header.height,this._offscreenCtx=this._offscreenCanvas.getContext("2d")}if(o(this._config.onBeforePlay))if(!(yield this._config.onBeforePlay()))return;this.isPlaying=!0,this._nextUpdateTime=Math.max(this._nextUpdateTime,performance.now()),this._checkEnd()&&(this._currFrame=-1),o(this._config.onPlay)&&this._config.onPlay()}})}pause(){return a(this,void 0,void 0,function*(){if(o(this._config.onBeforePause)&&!(yield this._config.onBeforePause()))return;this.isPlaying=!1,o(this._config.onPause)&&this._config.onPause()})}nextFrame(){return this.gifData&&this._ctx&&this._offscreenCtx?this.isRendering?l.isRendering:(this._currFrame=(this._currFrame+1)%this.gifData.frames.length,this._renderFrame(),void(this._nextUpdateTime=performance.now()+this.gifData.frames[this._currFrame].delay/this._config.speed)):this._errCall(l.notReady,"onError")}prevFrame(){return this.gifData&&this._ctx&&this._offscreenCtx?this.isRendering?l.isRendering:(this._currFrame--,this._currFrame<0&&(this._currFrame=this.gifData.frames.length-1),this._renderFrame(),void(this._nextUpdateTime=performance.now()+this.gifData.frames[this._currFrame].delay/this._config.speed)):this._errCall(l.notReady,"onError")}jump(t){return this.gifData?"number"!=typeof t?this._errCall(l.wrongParam,"onError"):this.isRendering?l.isRendering:((t<0||t>this.gifData.frames.length-1)&&(t=0),this._currFrame=t,void this._renderFrame()):this._errCall(l.notReady,"onError")}setSpeed(t){return!!this.speedList.includes(t)&&(this._config.speed=t,!0)}_togglePlay(){!1!==this._config.interactive&&(this.isPlaying?this.pause():this.play())}_update(t){if(this.isPlaying&&!this.isRendering&&this.gifData&&this._ctx&&this._offscreenCtx&&!document.hidden&&!(this._nextUpdateTime>t))if(this._currFrame++,this._checkEnd())this.isPlaying=!1,o(this._config.onEnd)&&this._config.onEnd();else for(this._renderFrame();this._nextUpdateTime<=t;)this._nextUpdateTime+=Math.max(this.gifData.frames[this._currFrame].delay/this._config.speed,1),this._nextUpdateTime<=t&&(this._currFrame++,this._checkEnd()&&(this.isPlaying=!1,o(this._config.onEnd)&&this._config.onEnd(),this._currFrame=this.gifData.frames.length-1,this._renderFrame()))}_renderFrame(){var t=this.gifData,i=this._ctx,e=this._offscreenCtx;this.isRendering=!0,n(i,e,t,this._currFrame,t=>o(this._config.filter)?this._config.filter(t):t),this.isRendering=!1}_checkEnd(){return this._currFrame>this.gifData.frames.length-1&&(!1===this._config.loop||(this._currFrame=0,!1))}_getGif(){return a(this,void 0,void 0,function*(){if(this.isLoading=!0,o(this._config.httpRequest))try{const t=yield this._config.httpRequest(this._config.src);this._gifBuffer=yield t.arrayBuffer()}catch(t){this._errCall(null==t?void 0:t.message,"onLoadError")}else try{const i=yield fetch(this._config.src);this._gifBuffer=yield i.arrayBuffer(),o(this._config.onLoad)&&this._config.onLoad()}catch(t){this._errCall(null==t?void 0:t.message,"onLoadError")}this.isLoading=!1})}_errCall(t,i){var e;if(o(this._config[i]))null!=(i=(e=this._config)[i])&&i.call(e,t);else{if(!o(this._config.onError))throw new Error(t);null!=(e=(i=this._config).onError)&&e.call(i,t)}}}return t.filter={grayscale:function(e){for(let t=0,i=e.data.length;t<i;t+=4){var a=.3*e.data[t]+.59*e.data[t+1]+.11*e.data[t+2]>>0;e.data[t]=e.data[t+1]=e.data[t+2]=a}return e},blackAndWhite:function(e){for(let t=0,i=e.data.length;t<i;t+=4){var a=(e.data[t]+e.data[t+1]+e.data[t+2])/3;e.data[t]=e.data[t+1]=e.data[t+2]=100<=a?255:0}return e},reverse:function(e){for(let t=0,i=e.data.length;t<i;t+=4)e.data[t]=255-e.data[t],e.data[t+1]=255-e.data[t+1],e.data[t+2]=255-e.data[t+2];return e},decolorizing:function(e){for(let t=0,i=e.data.length;t<i;t+=4){var a=(Math.min(e.data[t],e.data[t+1],e.data[t+2])+Math.max(e.data[t],e.data[t+1],e.data[t+2]))/2>>0;e.data[t]=e.data[t+1]=e.data[t+2]=a}return e},monochromeRed:function(e){for(let t=0,i=e.data.length;t<i;t+=4)e.data[t+1]=e.data[t+2]=0;return e},monochromeGreen:function(e){for(let t=0,i=e.data.length;t<i;t+=4)e.data[t]=e.data[t+2]=0;return e},monochromeBlue:function(e){for(let t=0,i=e.data.length;t<i;t+=4)e.data[t]=e.data[t+1]=0;return e},nostalgic:function(e){for(let t=0,i=e.data.length;t<i;t+=4){var a=e.data[t],n=e.data[t+1],r=e.data[t+2],s=.349*a+.686*n+.168*r,h=.272*a+.534*n+.131*r;e.data[t]=Math.min(255,Math.max(0,.393*a+.769*n+.189*r)),e.data[t+1]=Math.min(255,Math.max(0,s)),e.data[t+2]=Math.min(255,Math.max(0,h))}return e},cast:function(e){for(let t=0,i=e.data.length;t<i;t+=4){var a=e.data[t],n=e.data[t+1],r=e.data[t+2],s=128*n/(a+r+1),h=128*r/(n+a+1);e.data[t]=Math.min(255,Math.max(0,128*a/(n+r+1))),e.data[t+1]=Math.min(255,Math.max(0,s)),e.data[t+2]=Math.min(255,Math.max(0,h))}return e},frozen:function(e){for(let t=0,i=e.data.length;t<i;t+=4){var a=e.data[t],n=e.data[t+1],r=e.data[t+2],s=3*(n-a-r)/2,h=3*(r-n-a)/2;e.data[t]=Math.min(255,Math.max(0,3*(a-n-r)/2)),e.data[t+1]=Math.min(255,Math.max(0,s)),e.data[t+2]=Math.min(255,Math.max(0,h))}return e},comic:function(e){for(let t=0,i=e.data.length;t<i;t+=4){var a=e.data[t],n=e.data[t+1],r=e.data[t+2];e.data[t]=Math.abs(n-r+n+a)*a/256,e.data[t+1]=Math.abs(r-n+r+a)*a/256,e.data[t+2]=Math.abs(r-n+r+a)*n/256}return e},brown:function(e){for(let t=0,i=e.data.length;t<i;t+=4){var a=e.data[t],n=e.data[t+1],r=e.data[t+2],s=.349*a+.686*n+.168*r,h=.272*a+.534*n+.131*r;e.data[t]=Math.min(255,Math.max(0,.393*a+.769*n+.189*r)),e.data[t+1]=Math.min(255,Math.max(0,s)),e.data[t+2]=Math.min(255,Math.max(0,h))}return e}},t});
